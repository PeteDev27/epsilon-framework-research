<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>The Epsilon Framework</title>
                <script src="https://cdn.tailwindcss.com"></script>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
                        <style>
                                body {
                                            font-family: 'Inter', sans-serif;
                                                    }
                                                            .graphic-container {
                                                                        border: 1px solid #4a5568;
                                                                                    background-color: rgba(26, 32, 44, 0.8);
                                                                                            }
                                                                                                    .text-shadow {
                                                                                                                text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
                                                                                                                        }
                                                                                                                                @keyframes fadeIn {
                                                                                                                                            from { opacity: 0; }
                                                                                                                                                        to { opacity: 1; }
                                                                                                                                                                }
                                                                                                                                                                        .animate-fade-in {
                                                                                                                                                                                    animation: fadeIn 1s ease-in-out;
                                                                                                                                                                                            }
                                                                                                                                                                                                </style>
                                                                                                                                                                                                </head>
                                                                                                                                                                                                <body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

                                                                                                                                                                                                    <div id="video-container" class="w-full max-w-4xl aspect-video bg-black rounded-lg shadow-2xl overflow-hidden relative">
                                                                                                                                                                                                            <!-- Video Element with direct onclick attribute -->
                                                                                                                                                                                                                    <video id="video-player" class="w-full h-full object-cover" preload="auto" onclick="togglePlayPause(event)">
                                                                                                                                                                                                                                <!-- FINAL CHANGE: Source now points to the local video file in your repository -->
                                                                                                                                                                                                                                            <source src="epsilon-video.mp4" type="video/mp4">
                                                                                                                                                                                                                                                        Your browser does not support the video tag.
                                                                                                                                                                                                                                                                </video>

                                                                                                                                                                                                                                                                        <!-- Overlay for Text and Graphics. pointer-events-none ensures it doesn't block clicks. -->
                                                                                                                                                                                                                                                                                <div id="overlay" class="absolute inset-0 p-8 flex flex-col justify-center items-center text-center text-shadow pointer-events-none">
                                                                                                                                                                                                                                                                                            <!-- This will be populated by the script -->
                                                                                                                                                                                                                                                                                                    </div>

                                                                                                                                                                                                                                                                                                            <!-- Controls -->
                                                                                                                                                                                                                                                                                                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4 transition-opacity duration-300 opacity-100 hover:opacity-100" id="controls">
                                                                                                                                                                                                                                                                                                                                <div class="flex items-center space-x-4">
                                                                                                                                                                                                                                                                                                                                                <!-- Button with direct onclick attribute -->
                                                                                                                                                                                                                                                                                                                                                                <button id="play-pause-btn" class="text-white text-2xl" onclick="togglePlayPause(event)">
                                                                                                                                                                                                                                                                                                                                                                                    <!-- Initial icon is set here -->
                                                                                                                                                                                                                                                                                                                                                                                                    </button>
                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="flex-grow bg-gray-600 rounded-full h-2">
                                                                                                                                                                                                                                                                                                                                                                                                                                        <div id="progress-bar" class="bg-blue-500 h-2 rounded-full" style="width: 0%;"></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div id="time-display" class="text-sm">0:00 / 0:00</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // --- DATA: Video Script ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const script = [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                { start: 0, end: 15, type: 'scene', visual: 'titleCard' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            { start: 15, end: 45, type: 'scene', visual: 'introduction' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { start: 45, end: 60, type: 'scene', visual: 'chapterPlaceholder', text: 'Chapter 1: Core Concepts' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    { start: 60, end: 105, type: 'scene', visual: 'graphic1' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                { start: 105, end: 150, type: 'scene', visual: 'graphic2' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            { start: 150, end: 165, type: 'scene', visual: 'chapterPlaceholder', text: 'Chapter 2: EMF Distribution & Convergence' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { start: 165, end: 225, type: 'scene', visual: 'graphic3' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    { start: 225, end: 270, type: 'scene', visual: 'graphic4' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                { start: 270, end: 285, type: 'scene', visual: 'chapterPlaceholder', text: 'Chapter 3: Statistical Validation' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            { start: 285, end: 345, type: 'scene', visual: 'graphic5' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { start: 345, end: 375, type: 'scene', visual: 'conclusion' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    { start: 375, end: 390, type: 'scene', visual: 'credits' },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ];

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // --- Global Variables ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            let video, overlay, playPauseBtn, progressBar, timeDisplay;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    let currentScene = null;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            let isInitialized = false;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // --- SAFER ICON HANDLING ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const playIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const pauseIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // --- Functions ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    function renderScene(scene) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (!overlay || !scene) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            let content = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // This switch statement is unchanged
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    switch (scene.visual) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    case 'titleCard':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        content = `<div class="animate-fade-in"><h1 class="text-4xl md:text-5xl font-bold mb-4">The Epsilon Framework</h1><p class="text-xl md:text-2xl font-light">A New Geometry for Physics</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            case 'introduction':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                content = `<div class="w-full max-w-md text-left p-4 rounded-lg bg-black bg-opacity-40"><h2 class="text-2xl font-bold mb-4">Part 1: The Fundamentals</h2><ul class="list-disc list-inside mb-6 ml-4"><li>Chapter 1: Core Concepts</li></ul><h2 class="text-2xl font-bold mb-4">Part 2: Key Insights</h2><ul class="list-disc list-inside ml-4"><li>Chapter 2: EMF Distribution & Convergence</li><li>Chapter 3: Statistical Validation</li></ul><p class="mt-8 text-lg italic">"This presentation introduces the Epsilon Framework..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    case 'chapterPlaceholder':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        content = `<h2 class="text-3xl md:text-4xl font-bold">${scene.text}</h2>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            case 'graphic1':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 content = `<div class="graphic-container p-6 rounded-lg w-full max-w-lg"><h3 class="text-xl font-semibold mb-4">Defining the '|R| Modulus'</h3><div class="flex justify-around items-center text-center"><div><div class="w-16 h-16 bg-blue-500 rounded-full mx-auto mb-2"></div><p>n: potential state vector</p></div><span class="text-2xl">+</span><div><div class="w-12 h-12 bg-green-500 rounded-full mx-auto mb-2 border-2 border-white"></div><p>R: unit state vector</p></div><span class="text-2xl">=</span><div><div class="w-20 h-20 bg-purple-500 rounded-lg mx-auto mb-2"></div><p>Rdn: Aggregate Sum</p></div></div><p class="mt-6 text-sm italic">Narration: "To begin, we must define the core components..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     case 'graphic2':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         content = `<div class="graphic-container p-6 rounded-lg w-full max-w-lg"><h3 class="text-xl font-semibold mb-2">State Sensitivity</h3><div class="w-full h-48 bg-gray-800 rounded relative mt-4"><div class="absolute bottom-0 left-0 text-xs -mb-6">Change in 'x'</div><div class="absolute top-0 left-0 text-xs -ml-16 transform -rotate-90 origin-top-left">Change in Sum</div><svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M 10 90 Q 30 80, 40 20" stroke="cyan" stroke-width="2" fill="none" /></svg></div><p class="mt-8 text-sm italic">Narration: "...This leads to the concept of state sensitivity..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             case 'graphic3':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 content = `<div class="graphic-container p-6 rounded-lg w-full max-w-lg"><h3 class="text-xl font-semibold mb-2">Convergence of System Forces</h3><div class="w-full h-48 bg-gray-800 rounded relative mt-4"><div class="absolute bottom-0 right-0 text-xs -mb-6">k  </div><div class="absolute top-0 left-0 text-xs -ml-16 transform -rotate-90 origin-top-left">Magnitude</div><svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M 10 20 C 40 30, 70 80, 95 95" stroke="red" stroke-width="2" fill="none" /><path d="M 10 40 C 30 50, 60 85, 95 95" stroke="blue" stroke-width="2" fill="none" /><text x="15" y="18" fill="red" font-size="6">c(k)</text><text x="15" y="38" fill="blue" font-size="6">dc/dk</text></svg></div><p class="mt-8 text-sm italic">Narration: "A key insight from the framework is the behavior of the Electromotive Force..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     case 'graphic4':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         content = `<div class="graphic-container p-6 rounded-lg w-full max-w-lg text-center"><h3 class="text-xl font-semibold mb-4">Opposing Forces Analogy</h3><div class="relative w-48 h-48 mx-auto flex items-center justify-center"><div class="w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center"><p>System State</p></div><div class="absolute top-1/2 left-full ml-4 text-center"><span class="text-3xl text-red-500"></span><p>c(k) Positive Force</p></div><div class="absolute top-1/2 right-full mr-4 text-center"><span class="text-3xl text-blue-500"></span><p>b(k) Opposing Flux</p></div></div><p class="mt-8 text-sm italic">Narration: "...This is balanced by an opposing 'flux force', b(k), creating a state of equilibrium."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             case 'graphic5':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 content = `<div class="graphic-container p-6 rounded-lg w-full max-w-lg"><h3 class="text-xl font-semibold mb-4">Two-Population T-Test: n(R) vs. b(r)</h3><div class="bg-gray-800 p-4 rounded-md"><div class="flex justify-between py-2 border-b border-gray-600"><span class="font-semibold">Metric</span><span class="font-semibold">Value</span></div><div class="flex justify-between py-2 border-b border-gray-600"><span>T-Statistic</span><span>12.345</span></div><div class="flex justify-between py-2 border-b border-gray-600"><span>Degrees of Freedom</span><span>98</span></div><div class="flex justify-between py-2 bg-cyan-800 bg-opacity-50 rounded px-2 -mx-2"><span class="font-bold">p-value</span><span class="font-bold text-cyan-400">&lt; 0.001</span></div></div><p class="mt-4 text-center font-semibold">Result: Statistically significant difference</p><p class="mt-4 text-sm italic">Narration: "To validate the framework, a two-population t-test was conducted..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     case 'conclusion':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         content = `<div class="w-full max-w-xl text-left p-4 rounded-lg bg-black bg-opacity-40"><h2 class="text-3xl font-bold mb-4">Key Takeaways</h2><ul class="list-disc list-inside space-y-2 text-lg"><li>The Epsilon Framework defines systems through a 'State Sensitivity' modulus.</li><li>System forces c(k) and b(k) exist in a balanced equilibrium.</li><li>At large k, the system becomes stable as forces converge to zero.</li><li>Statistical analysis validates the framework's core predictions.</li></ul><p class="mt-6 text-sm italic">Narration: "In summary, the Epsilon Framework provides a new lens for viewing physical systems..."</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             case 'credits':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 content = `<div class="text-center"><p class="text-lg">Epsilon Framework Research</p><p class="text-sm">Copyright 2025, All rights reserved.</p></div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     break;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     default:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         content = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 overlay.innerHTML = content;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 function onTimeUpdate() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             if (!isInitialized) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const currentTime = video.currentTime;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     const duration = video.duration;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 if (duration) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 progressBar.style.width = `${(currentTime / duration) * 100}%`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const scene = script.find(s => currentTime >= s.start && currentTime < s.end);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (scene !== currentScene) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     currentScene = scene;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     renderScene(currentScene);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 function formatTime(time) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             if (isNaN(time)) return '0:00';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const minutes = Math.floor(time / 60);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     const seconds = Math.floor(time % 60).toString().padStart(2, '0');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 return `${minutes}:${seconds}`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 function initializePlayer() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             console.log("Attempting to initialize player...");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         video = document.getElementById('video-player');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     overlay = document.getElementById('overlay');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 playPauseBtn = document.getElementById('play-pause-btn');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             progressBar = document.getElementById('progress-bar');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         timeDisplay = document.getElementById('time-display');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (video && overlay && playPauseBtn) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     playPauseBtn.innerHTML = playIcon; // Set initial icon
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     video.addEventListener('timeupdate', onTimeUpdate);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     video.addEventListener('loadedmetadata', onTimeUpdate);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     video.addEventListener('playing', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         console.log('First frame is playing!');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }, { once: true });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         renderScene(script[0]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         isInitialized = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         console.log("Player initialized successfully.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     console.error("Initialization failed: A required element was not found.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 async function togglePlayPause(event) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             if (event) event.stopPropagation();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (!isInitialized) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     initializePlayer();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             if (!video) return;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         try {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         if (video.paused) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             await video.play();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 playPauseBtn.innerHTML = pauseIcon;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     video.pause();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         playPauseBtn.innerHTML = playIcon;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     } catch (error) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (error.name !== 'AbortError') console.error("Error during playback toggle:", error);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
